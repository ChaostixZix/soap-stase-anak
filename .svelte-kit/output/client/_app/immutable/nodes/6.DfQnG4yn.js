import{S as Q,i as X,s as Y,n as U,d as h,E as Z,G as W,a as A,b as P,c as d,u as z,K as $,v as u,e as m,f as x,x as F,h as I,g as q,j as p,k as S,t as B,C as ee}from"../chunks/TMsUfOpP.js";import"../chunks/IHki7fMi.js";import{s as G}from"../chunks/BNarvpjD.js";import{g as te}from"../chunks/D42KGYS3.js";function K(l){let t,s;return{c(){t=p("div"),s=B(l[3]),this.h()},l(e){t=m(e,"DIV",{class:!0});var a=x(t);s=q(a,l[3]),a.forEach(h),this.h()},h(){u(t,"class","text-red-600 text-sm text-center")},m(e,a){P(e,t,a),d(t,s)},p(e,a){a&8&&A(s,e[3])},d(e){e&&h(t)}}}function J(l){let t,s;return{c(){t=p("div"),s=B(l[2]),this.h()},l(e){t=m(e,"DIV",{class:!0});var a=x(t);s=q(a,l[2]),a.forEach(h),this.h()},h(){u(t,"class","text-green-600 text-sm text-center")},m(e,a){P(e,t,a),d(t,s)},p(e,a){a&4&&A(s,e[2])},d(e){e&&h(t)}}}function se(l){let t,s,e,a='<h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">Sign in to SOAP Manager</h2> <p class="mt-2 text-center text-sm text-gray-600">We&#39;ll send you a magic link to sign in</p>',E,i,_,g,c="Email address",T,f,O,C,D,k,b,w=l[1]?"Sending...":"Send Magic Link",L,j,H,n=l[3]&&K(l),r=l[2]&&J(l);return{c(){t=p("div"),s=p("div"),e=p("div"),e.innerHTML=a,E=S(),i=p("form"),_=p("div"),g=p("label"),g.textContent=c,T=S(),f=p("input"),O=S(),n&&n.c(),C=S(),r&&r.c(),D=S(),k=p("div"),b=p("button"),L=B(w),this.h()},l(o){t=m(o,"DIV",{class:!0});var v=x(t);s=m(v,"DIV",{class:!0});var M=x(s);e=m(M,"DIV",{"data-svelte-h":!0}),F(e)!=="svelte-8v0dbb"&&(e.innerHTML=a),E=I(M),i=m(M,"FORM",{class:!0});var y=x(i);_=m(y,"DIV",{});var V=x(_);g=m(V,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(g)!=="svelte-o70mpp"&&(g.textContent=c),T=I(V),f=m(V,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),V.forEach(h),O=I(y),n&&n.l(y),C=I(y),r&&r.l(y),D=I(y),k=m(y,"DIV",{});var N=x(k);b=m(N,"BUTTON",{type:!0,class:!0});var R=x(b);L=q(R,w),R.forEach(h),N.forEach(h),y.forEach(h),M.forEach(h),v.forEach(h),this.h()},h(){u(g,"for","email"),u(g,"class","sr-only"),u(f,"id","email"),u(f,"type","email"),f.required=!0,u(f,"class","appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"),u(f,"placeholder","Email address"),u(b,"type","submit"),b.disabled=l[1],u(b,"class","group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),u(i,"class","mt-8 space-y-6"),u(s,"class","max-w-md w-full space-y-8"),u(t,"class","min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8")},m(o,v){P(o,t,v),d(t,s),d(s,e),d(s,E),d(s,i),d(i,_),d(_,g),d(_,T),d(_,f),W(f,l[0]),d(i,O),n&&n.m(i,null),d(i,C),r&&r.m(i,null),d(i,D),d(i,k),d(k,b),d(b,L),j||(H=[z(f,"input",l[5]),z(i,"submit",$(l[4]))],j=!0)},p(o,[v]){v&1&&f.value!==o[0]&&W(f,o[0]),o[3]?n?n.p(o,v):(n=K(o),n.c(),n.m(i,C)):n&&(n.d(1),n=null),o[2]?r?r.p(o,v):(r=J(o),r.c(),r.m(i,D)):r&&(r.d(1),r=null),v&2&&w!==(w=o[1]?"Sending...":"Send Magic Link")&&A(L,w),v&2&&(b.disabled=o[1])},i:U,o:U,d(o){o&&h(t),n&&n.d(),r&&r.d(),j=!1,Z(H)}}}function ae(l,t,s){let e="",a=!1,E="",i="";ee(()=>{G.auth.getSession().then(({data:{session:c}})=>{c&&te("/")})});async function _(){try{s(1,a=!0),s(3,i=""),s(2,E="");const{error:c}=await G.auth.signInWithOtp({email:e,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(c)throw c;s(2,E="Check your email for the magic link!")}catch(c){s(3,i=(c==null?void 0:c.message)||"An error occurred")}finally{s(1,a=!1)}}function g(){e=this.value,s(0,e)}return[e,a,E,i,_,g]}class oe extends Q{constructor(t){super(),X(this,t,ae,se,Y,{})}}export{oe as component};
